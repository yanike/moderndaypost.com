(function(t){jQuery(document).on('click','.bf_add_files button',function(l){var a=t(this),e,s=t('#'+a.data('slug')),d=t('#bf_files_container_'+a.data('slug')+' ul.bf_files'),i=s.val();l.preventDefault();if(e){e.open();return};e=wp.media.frames.buddyfoms_gallery=wp.media({title:a.data('choose'),button:{text:a.data('update'),},library:{type:a.data('library_type'),},multiple:a.data('multiple'),});if(a.data('type'))e.uploader.options.uploader['params']['allowed_type']=a.data('allowed_type');e.on('select',function(){var t=e.state().get('selection');t.map(function(t){t=t.toJSON();if(t.id){if(a.data('multiple')){i=i?i+','+t.id:t.id}
else{i=t.id};attachment_url=t.url;if(t.type=='image'){attachment_image=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url}
else{attachment_image=t.icon};if(!a.data('multiple'))d.html('');d.append('                        <li class="image" data-attachment_id="'+t.id+'">                        <div class="bf_attachment_li">                        <div class="bf_attachment_img">                        <img style="height:64px" src="'+attachment_image+'" />                        </div><div class="bf_attachment_meta">                        <p>Name:'+t.name+'</p>                        <p><a href="#" class="delete tips" data-slug="'+a.data('slug')+'" data-tip="'+a.data('tip')+'">'+a.data('text')+'</a>                        <a href="'+attachment_url+'" target="_blank" class="view" data-tip="'+ +'">'+ +'</a></p>                        </div></div>                        </li>')}});s.val(i)});e.open()});jQuery(document).on('click','.bf_files a.delete',function(e){if(confirm('Delete Permanently')){var i=t(this),l=t('#'+i.data('slug')),s=t('#bf_files_container_'+i.data('slug')+' ul.bf_files'),a=l.val();t(this).closest('li.image').remove();var a='';t('#bf_files_container_'+i.data('slug')+' ul li.image').css('cursor','default').each(function(){var t=jQuery(this).attr('data-attachment_id');a=a+t+','});l.val(a);t('#tiptip_holder').removeAttr('style');t('#tiptip_arrow').removeAttr('style')};return!1})})(jQuery);