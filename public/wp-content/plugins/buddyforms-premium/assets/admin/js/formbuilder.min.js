;var BuddyFormsBuilderHooks=BuddyFormsBuilderHooks||{};BuddyFormsBuilderHooks.actions=BuddyFormsBuilderHooks.actions||{};BuddyFormsBuilderHooks.filters=BuddyFormsBuilderHooks.filters||{};BuddyFormsBuilderHooks.addAction=function(e,o,r){if(typeof r==='undefined'){r=10};BuddyFormsBuilderHooks.actions[e]=BuddyFormsBuilderHooks.actions[e]||[];BuddyFormsBuilderHooks.actions[e].push({priority:r,callback:o})};BuddyFormsBuilderHooks.addFilter=function(e,o,r){if(typeof r==='undefined'){r=10};BuddyFormsBuilderHooks.filters[e]=BuddyFormsBuilderHooks.filters[e]||[];BuddyFormsBuilderHooks.filters[e].push({priority:r,callback:o})};BuddyFormsBuilderHooks.removeAction=function(e,o){BuddyFormsBuilderHooks.actions[e]=BuddyFormsBuilderHooks.actions[e]||[];BuddyFormsBuilderHooks.actions[e].forEach(function(r,t){if(r.callback===o){BuddyFormsBuilderHooks.actions[e].splice(t,1)}})};BuddyFormsBuilderHooks.removeFilter=function(e,o){BuddyFormsBuilderHooks.filters[e]=BuddyFormsBuilderHooks.filters[e]||[];BuddyFormsBuilderHooks.filters[e].forEach(function(r,t){if(r.callback===o){BuddyFormsBuilderHooks.filters[e].splice(t,1)}})};BuddyFormsBuilderHooks.doAction=function(e,o){var r=[];if(typeof BuddyFormsBuilderHooks.actions[e]!=='undefined'&&BuddyFormsBuilderHooks.actions[e].length>0){BuddyFormsBuilderHooks.actions[e].forEach(function(e){r[e.priority]=r[e.priority]||[];r[e.priority].push(e.callback)});r.forEach(function(e){e.forEach(function(e){e(o)})})}};BuddyFormsBuilderHooks.applyFilters=function(e,o,t){var r=[];if(typeof BuddyFormsBuilderHooks.filters[e]!=='undefined'&&BuddyFormsBuilderHooks.filters[e].length>0){BuddyFormsBuilderHooks.filters[e].forEach(function(e){r[e.priority]=r[e.priority]||[];r[e.priority].push(e.callback)});r.forEach(function(e){e.forEach(function(e){o=e(o,t)})})};return o};jQuery(function(){jQuery('.bf-color').wpColorPicker();jQuery('.bf-form-type-wrap').appendTo('#buddyforms_form_setup .hndle span');jQuery(function(){jQuery('#buddyforms_form_setup').find('.hndle').unbind('click.postboxes');jQuery('#buddyforms_form_setup').on('click','.hndle',function(e){if(jQuery(e.target).filter('input, option, label, select').length){return};jQuery('#buddyforms_form_setup').toggleClass('closed')})});jQuery('form').bind('submit',function(){jQuery(this).find(':input').prop('disabled',!1)});jQuery(document).on('buddyform:load_fields',function(e){var r=jQuery(this).find('.buddyforms_forms_builder');if(r.length>0){var o=jQuery('#sortable_buddyforms_elements');if(!o.hasClass('buddyform-ready')){o.accordion({collapsible:!0,header:'div.accordion-heading-options',heightStyle:'content',});o.addClass('buddyform-ready')}
else{o.accordion('refresh')};jQuery('.buddyform-tabs-left').tabs({'heightStyle':'content',}).addClass('ui-tabs-vertical ui-helper-clearfix');jQuery('.buddyform-tabs-left li').removeClass('ui-corner-top').addClass('ui-corner-left')}});jQuery(document).on('buddyform:load_notifications',function(){var e=jQuery(this).find('.buddyforms_accordion_notification');if(e.length>0){var o=e.find('li.bf_trigger_list_item');jQuery.each(o,function(){var e=jQuery(this);if(!e.hasClass('buddyforms-ready')){e.accordion({collapsible:!0,active:!1,header:'div.accordion-heading-options',heightStyle:'content',});e.addClass('buddyforms-ready')}})}})});function BuddyFormsAdmin(){jQuery.fn.extend({insertShortCode:function(short){return this.each(function(o){if(document.selection){this.focus();var n=document.selection.createRange();n.text=short;this.focus()}
else if(this.selectionStart||this.selectionStart=='0'){if(tinymce){var t=tinymce.get(this.id);if(t){t.execCommand('mceInsertContent',!1,short);return}};var r=this.selectionStart,i=this.selectionEnd,d=this.scrollTop;this.value=this.value.substring(0,r)+short+this.value.substring(i,this.value.length);this.focus();this.selectionStart=r+short.length;this.selectionEnd=r+short.length;this.scrollTop=d}
else{if(this instanceof tinymce){tinymce.activeEditor.execCommand('mceInsertContent',!1,short)}
else{this.value+=short;this.focus()}}})},});function o(e,short){if(!e||!short){return!1};return e.each(function(){if(document.selection){e.focus();var d=document.selection.createRange();d.text=short;e.focus()}
else if(e.selectionStart||e.selectionStart=='0'){var r=e.selectionStart,t=e.selectionEnd,i=e.scrollTop;e.value=e.value.substring(0,r)+short+e.value.substring(t,e.value.length);e.focus();e.selectionStart=r+short.length;e.selectionEnd=r+short.length;e.scrollTop=i}
else{e.value+=short;e.focus()}})};function e(e){e.stopPropagation();var t=jQuery(this);if(t){var i=t.attr('data-target'),r=jQuery('[name="'+i+'"]');if(r&&r.length>0){var short=t.attr('data-short');if(short&&short.length>0){r.insertShortCode(short);return!1}}}};return{init:function(){var o=jQuery('.buddyforms-metabox');if(o&&o.length>0){jQuery(document).on('click','.buddyforms-shortcodes-action',e)}},}};var buddyFormsAdminInstance=BuddyFormsAdmin();jQuery(document).ready(function(){jQuery(document.body).trigger({type:'buddyform:load_fields'});jQuery(document.body).trigger({type:'buddyform:load_notifications'});buddyFormsAdminInstance.init();jQuery(document.body).on('click','[name="buddyforms_options[on_user_update][moderate_user_role_change][]"]',function(){var e=jQuery(this),o=e.closest('table.wp-list-table').find('tr[id^=table_row_global_]').not('tr[id=table_row_global_0], tr[id=table_row_global_1]');if(e.is(':checked')){jQuery.each(o,function(){jQuery(this).removeClass('bf-hidden');jQuery(this).find('input, select').removeClass('bf-hidden')})}
else{jQuery.each(o,function(){jQuery(this).addClass('bf-hidden');jQuery(this).find('input, select').addClass('bf-hidden')})}});jQuery(document.body).on('change','.bf-color-radio',function(){var o=jQuery(this).val(),e=jQuery(this).attr('data-field_id');if(o=='color'){jQuery('#bf_color_container_'+e).removeClass('bf-color-hidden')}
else{jQuery('#bf_color_container_'+e).addClass('bf-color-hidden')}});jQuery(document.body).on('change','#bf_add_new_form_element_modal',function(){jQuery('#formbuilder-action-select-modal').dialog('close');jQuery('#bf_add_new_form_element').val(jQuery('#bf_add_new_form_element_modal').val());jQuery('#formbuilder-add-element').trigger('click')});jQuery(document.body).on('click','#formbuilder-add-element',function(){jQuery('.formbuilder-spinner').addClass('is-active');var s=jQuery(this),i=bf_getUrlParameter('post');if(i==undefined){i=0};var t=jQuery('#bf_add_new_form_element'),o=t.val();if(o==='none'){jQuery('#bf_add_new_form_element_modal').val('none');jQuery('#formbuilder-action-select-modal').dialog({title:'Please Select a Field Type',height:240,modal:!0,});jQuery('.formbuilder-spinner').removeClass('is-active');return!1};var r=t.find(':selected').data('unique'),e=jQuery('#sortable_buddyforms_elements .bf_'+o);if(r==='unique'){if(e!==null&&typeof e==='object'&&e.length>0){bf_alert('This element can only be added once into each form');jQuery('.formbuilder-spinner').removeClass('is-active');return!1}};var n=BuddyFormsBuilderHooks.applyFilters('buddyforms:add_new_form_element',!0,{addElement:t,fieldType:o,search4Element:e,unique:r});if(n){if(buddyformsGlobal){jQuery.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_display_form_element','fieldtype':o,'unique':r,'post_id':i,},success:function(e){if(e=='unique'){bf_alert('This element can only be added once into each form');return!1};jQuery('.buddyforms_template').remove();e=e.replace('accordion-body collapse','accordion-body in collapse');jQuery('#sortable_buddyforms_elements').append(e);jQuery('.formbuilder-spinner').removeClass('is-active');bf_update_list_item_number();jQuery('#buddyforms_form_elements').removeClass('closed');jQuery('html, body').animate({scrollTop:jQuery('#buddyforms_form_elements ul li:last').offset().top-200},1000);var t=jQuery('#form_post_type').val();if(t==='bf_submissions'){var r=jQuery(e).find('[id^="this_field_id"]').val();bf_taxonomy_input(r)};jQuery(document.body).trigger({type:'buddyform:load_fields'});var o=jQuery('.bf-select2');if(o.length>0){buddyforms_load_select2(o)}},error:function(){jQuery('.formbuilder-spinner').removeClass('is-active');jQuery('<div></div>').dialog({modal:!0,title:'Info',open:function(){var e='Something went wrong ;-(sorry)';jQuery(this).html(e)},buttons:{Ok:function(){jQuery(this).dialog('close')},},})},complete:function(){jQuery('#formbuilder-show-templates').hide()},})}}
else{var d=BuddyFormsBuilderHooks.applyFilters('buddyforms:add_new_form_element_error_message','This element is not valid to add to the form.',{addElement:t,fieldType:o,search4Element:e,unique:r});bf_alert(d);jQuery('.formbuilder-spinner').removeClass('is-active')};return!1});jQuery(document.body).on('click','.bf_form_template',function(){var e=jQuery(this);e.parent().LoadingOverlay('show');var o=jQuery('#attached_page option:selected').val(),t=e.attr('data-type');jQuery('button.bf_form_template').prop('disabled',!0);var r=e.data('template');load_formbuilder_template(r,function(){e.parent().LoadingOverlay('hide');jQuery('button.bf_form_template').prop('disabled',!1);jQuery(document.body).trigger({type:'buddyform:load_notifications'});BuddyFormsBuilderHooks.doAction('buddyforms-change-form-type',[t]);if(o&&o.length>0){jQuery('#attached_page').val(o).change()}});return!1})});