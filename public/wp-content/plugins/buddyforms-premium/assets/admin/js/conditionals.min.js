;function from_setup_form_type(e){from_setup_post_type();from_setup_attached_page();jQuery('.activeform-submission').addClass('active');jQuery('#form-submission').addClass('active in');jQuery('#adv-settings input[type=\'checkbox\']').prop('checked',!0);switch(e){case'contact':jQuery('#form_post_type').val('bf_submissions');jQuery('.buddyform-nav-tabs .edit-submissions_nav a').text('View Submissions');jQuery('.edit-submissions_nav, .notifications_nav').show();jQuery('.buddyforms-metabox-hide-if-form-type-contact').hide();jQuery('.create-content_nav').hide();jQuery('.bf_show_if_f_type_post').hide();jQuery('.bf_show_if_f_type_registration').hide();jQuery('.bf_show_if_f_type_all').show();jQuery('.bf_show_if_f_type_contact').show();jQuery('#bf-after-submission-action option[value=display_form]').hide();jQuery('#bf-after-submission-action option[value=display_post]').hide();jQuery('#bf-after-submission-action option[value=display_posts_list]').hide();break;case'registration':jQuery('#form_post_type').val('bf_submissions');jQuery('#attached_page').val('none');jQuery('.registrations_nav, .bf_hide_if_attached_page_none').show();jQuery('.permission_nav, .edit-submissions_nav, .create-content_nav, .notifications_nav').hide();jQuery('.buddyforms-metabox-hide-if-form-type-register').hide();jQuery('.bf_show_if_f_type_post').hide();jQuery('.bf_show_if_f_type_contact').hide();jQuery('.bf_show_if_f_type_registration').show();jQuery('.bf_show_if_f_type_all').show();jQuery('#bf-after-submission-action option[value=display_post]').hide();jQuery('#bf-after-submission-action option[value=display_posts_list]').hide();break;case'post':jQuery('.buddyform-nav-tabs .edit-submissions_nav a').text('Edit Submissions');jQuery('.buddyforms-metabox-show-if-form-type-post').show();jQuery('#bf-after-submission-action option[value=display_form]').show();jQuery('#bf-after-submission-action option[value=display_post]').show();jQuery('#bf-after-submission-action option[value=display_posts_list]').show();jQuery('.create-content_nav,.permission_nav, .edit-submissions_nav, .bf_show_if_f_type_post, .notifications_nav').show();jQuery('.bf_show_if_f_type_contact').hide();jQuery('.bf_show_if_f_type_registration').hide();jQuery('.bf_show_if_f_type_all').show();jQuery('.bf_show_if_f_type_post').show();break}};function from_setup_post_type(){var e=jQuery('#form_post_type').val();if(e=='bf_submissions'){jQuery('.buddyforms-metabox-show-if-post-type-none').hide();jQuery('.bf_hide_if_post_type_none').hide();jQuery('.taxonomy_no_post_type').show()}
else{jQuery('.buddyforms-metabox-show-if-post-type-none').show();jQuery('.bf_hide_if_post_type_none').show();jQuery('.taxonomy_no_post_type').hide()}};function from_setup_attached_page(){var e=jQuery('#attached_page').val();if(e=='none'){jQuery('.buddyforms-metabox-show-if-attached-page,.bf_hide_if_attached_page_none').hide();jQuery('.bf_hide_if_attached_page_none').hide();jQuery('#bf-after-submission-action option[value=display_posts_list]').hide();jQuery('#public_submit_create_account-0').prop('checked',!1)}
else{jQuery('.buddyforms-metabox-show-if-attached-page,.bf_hide_if_attached_page_none').show();jQuery('.bf_hide_if_attached_page_none').show();jQuery('#bf-after-submission-action option[value=display_posts_list]').show()};from_setup_create_account()};function from_setup_create_account(){if(jQuery('#public_submit_create_account-0').is(':checked')){jQuery('.registrations_nav').show()}
else{jQuery('.registrations_nav').hide()}};function bf_taxonomy_input(e){var o=jQuery('#taxonomy_field_id_'+e).val();jQuery('#table_row_'+e+'_taxonomy_default').hide();jQuery('#table_row_'+e+'_taxonomy_include').hide();jQuery('#table_row_'+e+'_taxonomy_exclude').hide();jQuery('#table_row_'+e+'_taxonomy_order').hide();jQuery('#table_row_'+e+'_taxonomy_placeholder').hide();jQuery('#table_row_'+e+'_show_option_none').hide();jQuery('#table_row_'+e+'_create_new_tax').hide();jQuery('#table_row_'+e+'_multiple').hide();jQuery('#table_row_'+e+'_taxonomy_filter').hide();jQuery('#table_row_'+e+'_use_tag_style_input').hide();jQuery('#table_row_'+e+'_maximumSelectionLength').hide();if(o==null){return};var t=jQuery('#form_post_type').val();if(o=='none'||t=='bf_submissions'){jQuery('#table_row_'+e+'_taxonomy_default').hide();jQuery('#table_row_'+e+'_taxonomy_include').hide();jQuery('#table_row_'+e+'_taxonomy_exclude').hide();jQuery('#table_row_'+e+'_taxonomy_order').hide();jQuery('#table_row_'+e+'_taxonomy_placeholder').hide();jQuery('#table_row_'+e+'_show_option_none').hide();jQuery('#table_row_'+e+'_create_new_tax').hide();jQuery('#table_row_'+e+'_multiple').hide();jQuery('#table_row_'+e+'_taxonomy_filter').hide();jQuery('#table_row_'+e+'_use_tag_style_input').hide();jQuery('#table_row_'+e+'_maximumSelectionLength').hide()}
else{jQuery('#table_row_'+e+'_taxonomy_default').show();jQuery('#table_row_'+e+'_taxonomy_include').show();jQuery('#table_row_'+e+'_taxonomy_exclude').show();jQuery('#table_row_'+e+'_taxonomy_order').show();jQuery('#table_row_'+e+'_taxonomy_placeholder').show();jQuery('#table_row_'+e+'_show_option_none').show();jQuery('#table_row_'+e+'_create_new_tax').show();jQuery('#table_row_'+e+'_multiple').show();jQuery('#table_row_'+e+'_taxonomy_filter').show();jQuery('#table_row_'+e+'_use_tag_style_input').show();jQuery('#table_row_'+e+'_maximumSelectionLength').show()}};function buddyforms_disable_contact_extra_permissions_handler(e,t){if(!t){var o=jQuery('#original_post_status');if(o&&o.length>0){var i=o.val()==='auto-draft';if(i){buddyforms_disable_contact_extra_permissions(e)}}}
else{buddyforms_disable_contact_extra_permissions(e)}};function buddyforms_disable_contact_extra_permissions(e){var t=jQuery('table.bf_permissions tbody'),o=t.find('tr'),i=t.closest('form').find('input[name="auto_draft"]'),a=(i&&i.length>0);if(e&&o&&o.length>0){jQuery.each(o,function(o,d){var i=jQuery(d).attr('data-target-role').trim(),t=!1,n=jQuery('#permission_for_'+i+'-0'),r=jQuery('#permission_for_'+i+'-1'),s=jQuery('#permission_for_'+i+'-2'),u=jQuery('#permission_for_'+i+'-3'),f=jQuery('#permission_for_'+i+'-4'),l=jQuery('#permission_for_'+i+'-5');if(e==='contact'){r.prop('disabled',!0).val('').removeProp('checked');s.prop('disabled',!0).val('').removeProp('checked');u.prop('disabled',!0).val('').removeProp('checked');l.prop('disabled',!0).val('').removeProp('checked')}
else{n.val('create').removeProp('disabled');r.val('edit').removeProp('disabled');s.val('delete').removeProp('disabled');if(a){if(i==='administrator'||i==='editor'){n.prop('checked',!0);r.prop('checked',!0);s.prop('checked',!0)}}
else{t=n.prop('checked');if(typeof t!==typeof undefined&&t!==!1){n.prop('checked',!0)};t=r.attr('checked');if(typeof t!==typeof undefined&&t!==!1){r.prop('checked',!0)};t=s.attr('checked');if(typeof t!==typeof undefined&&t!==!1){s.prop('checked',!0)}};u.val('draft').removeProp('disabled');f.val('all').removeProp('disabled');l.val('admin-submission').removeProp('disabled')}})}};jQuery(document).ready(function(e){if(BuddyFormsBuilderHooks){BuddyFormsBuilderHooks.addAction('buddyforms-change-form-type',function(e){console.log('change-form-type',e[0]);buddyforms_disable_contact_extra_permissions_handler(e[0],!0)},10)};var t=e('#bf-form-type-select').val();if(t){from_setup_form_type(t);buddyforms_disable_contact_extra_permissions_handler(t,!0)};e(document.body).on('change','#public_submit_create_account-0',function(){from_setup_create_account()});e(document.body).on('change','#form_post_type',function(){from_setup_post_type();var o=e('#form_post_type').val();if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_post_types_taxonomies','post_type':o},success:function(o){e('select.bf_tax_select').html(o);e('select.bf_tax_select').trigger('change')},error:function(){e('.formbuilder-spinner').removeClass('is-active');e('<div></div>').dialog({modal:!0,title:'Info',open:function(){var o='Something went wrong ;-(sorry)';e(this).html(o)},buttons:{Ok:function(){e(this).dialog('close')}}})}})}});e(document.body).on('change','#attached_page',function(){var o=e('#attached_page').val(),t=e('#attached_page').attr('data-slug');if(buddyformsGlobal){from_setup_attached_page();e.ajax({type:'POST',dataType:'json',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_url_builder','attached_page':o,'form_slug':t},success:function(o){if(!o['form_slug']){o['form_slug']='<span style="color:red">form slug</slug>'};e('.siteurl_create_html').html(o['permalink']+'create/'+o['form_slug']);e('.siteurl_edit_html').html(o['permalink']+'edit/'+o['form_slug'])},error:function(){e('<div></div>').dialog({modal:!0,title:'Info',open:function(){var o='Something went wrong ;-(sorry)';e(this).html(o)},buttons:{Ok:function(){e(this).dialog('close')}}})}})}});e(document.body).on('change','#bf-form-type-select',function(){var o=e(this).val();BuddyFormsBuilderHooks.doAction('buddyforms-change-form-type',[o]);from_setup_form_type(o)});e(document.body).on('change','.bf-after-submission-action',function(){a(e(this))});e('select#bf-after-submission-action').change();function a(o){if(o==null){o=e('.bf-after-submission-action');alert(i)};var i=o.val(),t=o.attr('data-hidden'),a=o.attr('id');if(!t)return;t=t.split(' ');t.forEach(function(o){e('.'+o).hide()});e('.'+i).show()};e(document.body).on('change','.bf_hidden_select',function(){bf_hidden_select(e(this))});function r(o){var i=o.find('input'),a=o.find(':checked').val(),t=i.attr('data-hidden'),r=i.attr('id');if(!t)return;t=t.split(' ');t.forEach(function(o){e('.'+o).hide()});e('.'+a).show()};e(document.body).on('change','.bf_hidden_input',function(){r(e(this))});e(document.body).on('change','.bf_hidden_checkbox',function(){var t=e(this).find('input'),o=t.attr('bf_hidden_checkbox'),i=t.attr('id');if(!o)return;if(e(t).is(':checked')){o=o.split(' ');o.forEach(function(o){e('#table_row_'+o).removeClass('hidden');e('#table_row_'+o+' td .checkbox label').removeClass('hidden');e('#table_row_'+o+' td .checkbox p').removeClass('hidden');e('#table_row_'+o+' td #'+o).removeClass('hidden');e('#'+o).removeClass('hidden')})}
else{o=o.split(' ');o.forEach(function(o){e('#table_row_'+o).addClass('hidden')})}});e(document.body).on('change','select.bf_tax_select',function(){var o=e(this).attr('field_id'),s=e(this).val();if(o!=null){e('#table_row_'+o+'_post_type_no_taxonomy_error').hide();var r=e('#taxonomy_field_id_'+o).val(),t=e('#taxonomy_default_'+o),i=e('#taxonomy_include'+o),a=e('#taxonomy_exclude'+o);if(buddyformsGlobal){e.ajax({type:'POST',url:buddyformsGlobal.admin_url,data:{'action':'buddyforms_update_taxonomy_default','taxonomy':r,},success:function(e){if(e!='false'){t.val(null).trigger('change');t.select2({placeholder:'Select default term'}).trigger('change');t.html(e);i.val(null).trigger('change');i.select2({placeholder:'Include Items'}).trigger('change');i.html(e);a.val(null).trigger('change');a.select2({placeholder:'Exclude Items'}).trigger('change');a.html(e)}},error:function(){e('<div></div>').dialog({modal:!0,title:'Info',open:function(){var o='Something went wrong ;-(sorry)';e(this).html(o)},buttons:{Ok:function(){e(this).dialog('close')}}})}})};bf_taxonomy_input(o)}});e(document.body).on('click','.public_submit_select input',function(){if(e(this).val()=='public_submit'){e('.public-submit-option').show();e('.registration-form-option').hide()};if(e(this).val()=='registration_form'){e('.registration-form-option').show();e('.public-submit-option').hide()}});e('.public_submit_select input:radio:checked').trigger('click');var o='label.bf_taxonomy_ajax_ready>input[type="checkbox"][name^="buddyforms_options[form_fields]"][name$="[ajax][]"]';e(document.body).on('change',o,function(){i(e(this))});if(e(o).length>0){e.each(e(o),function(){i(e(this))})};function i(o){var a=o.attr('data');if(a){var t=e('#table_row_'+a+'_minimumInputLength'),i=t.find('input.bf_hide_if_not_ajax_ready');if(o.is(':checked')){t.show();i.show()}
else{t.hide();i.show()}}}});